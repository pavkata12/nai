import{u as a,D as e,r as s,o as l,b as n,c as o,e as t,f as c,t as i,l as r,A as u,E as d,G as g,n as f,j as p,H as m,g as v,w as b,h}from"./vendor-aa0ffa31.js";import{_ as w,b as S,u as k,a as y}from"./index-c9e88ec7.js";const C={class:"login-header"},M={class:"logo-section"},x={class:"form-field"},N={class:"input-wrapper"},P=["placeholder"],_={class:"form-field"},I={class:"input-wrapper"},A=["type","placeholder"],L={class:"info-message"},U={class:"form-options"},j={class:"checkbox-wrapper"},D={class:"custom-checkbox"},E={key:0,class:"fas fa-check"},V={href:"#",class:"forgot-link"},q={key:1,class:"error-message"},O=["disabled"],B={key:0,class:"fas fa-spinner fa-spin"},G={key:1,class:"fas fa-sign-in-alt"},H={class:"login-footer"},K={class:"divider"},T={class:"social-buttons"},W={class:"social-btn discord"},z={class:"social-btn steam"},F={class:"register-section"};const J=w({name:"Login",setup(){const n=a(),o=S(),t=k(),c=e({username:"",password:""}),i=s(!1),r=s(!1),u=s(!1),d=s(""),g=s(null);return l(()=>{(async()=>{try{const a=await y.get("/api/health",{timeout:5e3});a.data.success&&("OK"===a.data.netcafe_bridge?g.value={type:"success",icon:"fas fa-check-circle",message:"Свързан с NetCafe системата"}:"DISCONNECTED"===a.data.netcafe_bridge&&(g.value={type:"warning",icon:"fas fa-exclamation-triangle",message:"NetCafe системата не е достъпна - работи с кеширани данни"}))}catch(a){g.value={type:"error",icon:"fas fa-times-circle",message:"Няма връзка със сървъра"}}})()}),{languageStore:t,credentials:c,showPassword:i,rememberMe:r,loading:u,error:d,connectionStatus:g,closeModal:()=>{n.push("/")},handleLogin:async()=>{if(c.username&&c.password){u.value=!0,d.value="";try{await o.login(c),n.push("/")}catch(a){a.message.includes("NetCafe connection failed")?d.value="Няма връзка с NetCafe системата. Моля свържете се с администратора.":a.message.includes("Invalid username or password")?d.value="Грешно потребителско име или парола":a.message.includes("Account is disabled")?d.value="Акаунтът е деактивиран":a.message.includes("Network error")?d.value="Мрежова грешка. Моля опитайте отново.":d.value=a.message||"Грешка при влизане. Моля опитайте отново."}finally{u.value=!1}}else d.value="Моля въведете потребителско име и парола"}}}},[["render",function(a,e,s,l,w,S){const k=n("router-link");return o(),t("div",{class:"login-modal-overlay",onClick:e[7]||(e[7]=(...a)=>l.closeModal&&l.closeModal(...a))},[e[16]||(e[16]=c("div",{class:"modal-background"},[c("div",{class:"bg-animation"}),c("div",{class:"bg-particles"})],-1)),c("div",{class:"login-card",onClick:e[6]||(e[6]=r(()=>{},["stop"]))},[c("button",{onClick:e[0]||(e[0]=(...a)=>l.closeModal&&l.closeModal(...a)),class:"close-button"},e[8]||(e[8]=[c("i",{class:"fas fa-times"},null,-1)])),c("div",C,[c("div",M,[e[9]||(e[9]=c("div",{class:"logo-icon"},[c("i",{class:"fas fa-flag-checkered"})],-1)),c("h2",null,i(l.languageStore.t("welcomeBack")),1),c("p",null,i(l.languageStore.t("viewStats")),1)])]),c("form",{onSubmit:e[5]||(e[5]=r((...a)=>l.handleLogin&&l.handleLogin(...a),["prevent"])),class:"login-form"},[c("div",x,[c("label",null,i(l.languageStore.t("username")),1),c("div",N,[e[10]||(e[10]=c("i",{class:"fas fa-user input-icon"},null,-1)),u(c("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.credentials.username=a),type:"text",placeholder:l.languageStore.t("enterUsername"),required:"",class:"form-input"},null,8,P),[[d,l.credentials.username]])])]),c("div",_,[c("label",null,i(l.languageStore.t("password")),1),c("div",I,[e[11]||(e[11]=c("i",{class:"fas fa-lock input-icon"},null,-1)),u(c("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>l.credentials.password=a),type:l.showPassword?"text":"password",placeholder:l.languageStore.t("enterPassword"),required:"",class:"form-input"},null,8,A),[[g,l.credentials.password]]),c("button",{type:"button",onClick:e[3]||(e[3]=a=>l.showPassword=!l.showPassword),class:"password-toggle"},[c("i",{class:f(l.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),c("div",L,[e[12]||(e[12]=c("i",{class:"fas fa-info-circle"},null,-1)),c("span",null,i(l.languageStore.t("infoMessage")),1)]),l.connectionStatus?(o(),t("div",{key:0,class:f(["connection-status",l.connectionStatus.type])},[c("i",{class:f(l.connectionStatus.icon)},null,2),c("span",null,i(l.connectionStatus.message),1)],2)):p("",!0),c("div",U,[c("label",j,[u(c("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>l.rememberMe=a),type:"checkbox",class:"hidden-checkbox"},null,512),[[m,l.rememberMe]]),c("div",D,[l.rememberMe?(o(),t("i",E)):p("",!0)]),c("span",null,i(l.languageStore.t("rememberMe")),1)]),c("a",V,i(l.languageStore.t("forgotPassword")),1)]),l.error?(o(),t("div",q,[e[13]||(e[13]=c("i",{class:"fas fa-exclamation-circle"},null,-1)),c("span",null,i(l.error),1)])):p("",!0),c("button",{type:"submit",disabled:l.loading,class:"login-button"},[l.loading?(o(),t("i",B)):(o(),t("i",G)),c("span",null,i(l.loading?l.languageStore.t("signingIn"):l.languageStore.t("signIn")),1)],8,O)],32),c("div",H,[c("div",K,[c("span",null,i(l.languageStore.t("orContinueWith")),1)]),c("div",T,[c("button",W,[e[14]||(e[14]=c("i",{class:"fab fa-discord"},null,-1)),c("span",null,i(l.languageStore.t("discord")),1)]),c("button",z,[e[15]||(e[15]=c("i",{class:"fab fa-steam"},null,-1)),c("span",null,i(l.languageStore.t("steam")),1)])]),c("div",F,[c("p",null,i(l.languageStore.t("noAccount")),1),v(k,{to:"/register",class:"register-link"},{default:b(()=>[h(i(l.languageStore.t("createAccount")),1)]),_:1})])])])])}],["__scopeId","data-v-7f3ff40f"]]);export{J as default};
