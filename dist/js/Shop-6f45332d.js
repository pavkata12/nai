import{_ as a,b as s,u as e,n as t}from"./index-c9e88ec7.js";import{r as l,z as i,o as r,c,e as n,f as o,h as u,t as d,F as p,y as f,j as g,n as v,x as m}from"./vendor-aa0ffa31.js";const h={class:"shop-page min-h-screen page-with-nav"},k={class:"hero"},y={class:"container"},b={class:"hero-content"},I={class:"hero-title"},C={class:"hero-title-accent"},S={class:"hero-subtitle"},_={class:"tokens-display"},w={class:"tokens-amount"},T={class:"section-padding"},$={class:"container"},P={key:0,class:"loading-state"},x={key:1,class:"error-state"},j={key:2},D={class:"categories-section"},U={class:"categories-grid"},A=["onClick"],F={class:"products-grid"},L={key:0,class:"status-badge"},V={class:"feature-badges"},z={key:0,class:"badge badge-popular"},E={key:1,class:"badge badge-premium"},M={key:2,class:"badge badge-limited"},R={class:"price-badge"},Y={class:"price-amount"},q={key:0,class:"original-price"},B={class:"product-content"},G={class:"product-name"},H={class:"product-description"},J={key:0,class:"features-grid"},K=["onClick","disabled"],N={key:0},O={key:1},Q={key:2},W={key:0,class:"empty-state"};const X=a({name:"Shop",setup(){const a=s(),c=e(),n=l("–í—Å–∏—á–∫–∏"),o=l([]),u=l(!1),d=l(null),p=async(a=0)=>{u.value=!0,d.value=null;try{const s=await t.getShopItems();if(s.success)o.value=s.items||[];else{if(a<2&&s.error&&(s.error.includes("502")||s.error.includes("Failed to get shop items")))return void setTimeout(()=>p(a+1),1e3);d.value=s.error||"–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ"}}catch(s){if(a<2)return void setTimeout(()=>p(a+1),1e3);d.value="–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä–∞"}finally{u.value=!1}},f=i(()=>{if(0===o.value.length)return["–í—Å–∏—á–∫–∏"];return["–í—Å–∏—á–∫–∏",...new Set(o.value.map(a=>a.category))]}),g=i(()=>"–í—Å–∏—á–∫–∏"===n.value?o.value.filter(a=>a.is_active):o.value.filter(a=>a.category===n.value&&a.is_active)),v=s=>0!==s.stock&&a.userTokens>=s.price;return r(async()=>{a.isLoggedIn&&await a.refreshUserData(),await p()}),{languageStore:c,authStore:a,selectedCategory:n,items:o,loading:u,error:d,categories:f,filteredItems:g,canPurchase:v,purchaseItem:async s=>{if(v(s))if(a.isLoggedIn){if(confirm(`–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∫—É–ø–∏—Ç–µ ${s.title} –∑–∞ ${s.price} —Ç–æ–∫–µ–Ω–∞?`))try{const e=await t.purchaseItem(null,s.id);e.success?("number"==typeof e.remaining_tokens&&await a.updateTokens(e.remaining_tokens),await a.refreshUserData(),await p(),alert(`‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–∫—É–ø–∏—Ö—Ç–µ ${s.title}!\nüí∞ –ü–ª–∞—Ç–µ–Ω–∏ —Ç–æ–∫–µ–Ω–∏: ${e.tokens_spent}\nüí∞ –û—Å—Ç–∞–≤–∞—â–∏ —Ç–æ–∫–µ–Ω–∏: ${a.userTokens}`)):alert("‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–∞—Ç–∞: "+(e.error||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ –≥—Ä–µ—à–∫–∞"))}catch(e){alert("‚ùå –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–∞—Ç–∞. –ú–æ–ª—è, –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.")}}else alert("–ú–æ–ª—è, –≤–ª–µ–∑—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª–∞ —Å–∏ –∑–∞ –¥–∞ –∫—É–ø—É–≤–∞—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏.")},getCategoryIcon:a=>({"–í—Å–∏—á–∫–∏":"fas fa-th-large",VIP:"fas fa-crown",VR:"fas fa-vr-cardboard","–û–±—É—á–µ–Ω–∏–µ":"fas fa-graduation-cap","–ù–∞—Å—Ç—Ä–æ–π–∫–∏":"fas fa-cogs","–ê–Ω–∞–ª–∏–∑":"fas fa-chart-line","–û–±–æ—Ä—É–¥–≤–∞–Ω–µ":"fas fa-gamepad","–ü—Ä–µ–º–∏—É–º":"fas fa-star"}[a]||"fas fa-tag")}}},[["render",function(a,s,e,t,l,i){return c(),n("div",h,[o("div",k,[s[4]||(s[4]=o("div",{class:"hero-overlay"},null,-1)),o("div",y,[o("div",b,[o("h1",I,[s[1]||(s[1]=u(" ACADEMY ")),o("span",C,d(t.languageStore.t("shopTitle").toUpperCase()),1)]),o("p",S,d(t.languageStore.t("shopSubtitle")),1),o("div",_,[s[2]||(s[2]=o("i",{class:"fas fa-coins"},null,-1)),s[3]||(s[3]=u(" –ù–∞–ª–∏—á–Ω–∏ —Ç–æ–∫–µ–Ω–∏: ")),o("span",w,d(t.authStore.userTokens),1)])])])]),o("div",T,[o("div",$,[t.loading?(c(),n("div",P,s[5]||(s[5]=[o("i",{class:"fas fa-spinner fa-spin"},null,-1),o("span",null,"–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏...",-1)]))):t.error?(c(),n("div",x,[s[7]||(s[7]=o("i",{class:"fas fa-exclamation-triangle"},null,-1)),o("p",null,d(t.error),1),o("button",{onClick:s[0]||(s[0]=(...s)=>a.loadShopItems&&a.loadShopItems(...s)),class:"btn-primary"},s[6]||(s[6]=[o("i",{class:"fas fa-sync-alt"},null,-1),u(" –û–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ ")]))])):(c(),n("div",j,[o("div",D,[o("div",U,[(c(!0),n(p,null,f(t.categories,a=>(c(),n("button",{key:a,onClick:s=>t.selectedCategory=a,class:v(["category-btn",t.selectedCategory===a?"active":""])},[o("i",{class:v(t.getCategoryIcon(a))},null,2),u(" "+d(a),1)],10,A))),128))])]),o("div",F,[(c(!0),n(p,null,f(t.filteredItems,a=>(c(),n("div",{key:a.id,class:"product-card"},[o("div",{class:"product-image",style:m(a.image_url?`background-image: url('${a.image_url}')`:"")},[-1!==a.stock?(c(),n("div",L,[o("span",{class:v(a.stock>0?"status-available":"status-unavailable")},d(a.stock>0?`–ù–∞–ª–∏—á–Ω–∏: ${a.stock}`:"–ò–∑—á–µ—Ä–ø–∞–Ω–æ"),3)])):g("",!0),o("div",V,[a.popular?(c(),n("span",z,s[8]||(s[8]=[o("i",{class:"fas fa-fire"},null,-1),u(" –ü–æ–ø—É–ª—è—Ä–µ–Ω ")]))):g("",!0),a.premium?(c(),n("span",E,s[9]||(s[9]=[o("i",{class:"fas fa-crown"},null,-1),u(" Premium ")]))):g("",!0),a.limited?(c(),n("span",M,s[10]||(s[10]=[o("i",{class:"fas fa-bolt"},null,-1),u(" –û–≥—Ä–∞–Ω–∏—á–µ–Ω ")]))):g("",!0)]),o("div",R,[s[11]||(s[11]=o("i",{class:"fas fa-coins"},null,-1)),o("span",Y,d(a.price),1),a.original_price&&a.discount?(c(),n("span",q,d(a.original_price),1)):g("",!0)])],4),o("div",B,[o("h3",G,d(a.title),1),o("p",H,d(a.description),1),a.features?(c(),n("div",J,[(c(!0),n(p,null,f(a.features.split(","),a=>(c(),n("div",{key:a,class:"feature-item"},[s[12]||(s[12]=o("i",{class:"fas fa-check"},null,-1)),u(" "+d(a.trim()),1)]))),128))])):g("",!0),o("button",{onClick:s=>t.purchaseItem(a),disabled:!t.canPurchase(a),class:v(["purchase-btn",{disabled:!t.canPurchase(a)}])},[s[13]||(s[13]=o("i",{class:"fas fa-shopping-cart"},null,-1)),0===a.stock?(c(),n("span",N,"–ò–∑—á–µ—Ä–ø–∞–Ω–æ")):t.authStore.userTokens<a.price?(c(),n("span",O,"–ù–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ —Ç–æ–∫–µ–Ω–∏")):(c(),n("span",Q,"–ö—É–ø–∏ —Å–µ–≥–∞"))],10,K)])]))),128))]),0===t.filteredItems.length?(c(),n("div",W,s[14]||(s[14]=[o("i",{class:"fas fa-shopping-bag"},null,-1),o("p",null,"–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤ —Ç–∞–∑–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è",-1)]))):g("",!0)]))])])])}],["__scopeId","data-v-8249a5a1"]]);export{X as default};
