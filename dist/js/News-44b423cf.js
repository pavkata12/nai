import{_ as a,u as e,n as s}from"./index-c9e88ec7.js";import{r as n,o as t,c as l,e as r,f as c,t as o,j as i,F as d,y as u,n as p,h as g}from"./vendor-aa0ffa31.js";const v={class:"news-page"},f={class:"news-header section-padding"},m={class:"container"},y={class:"header-content animate__animated animate__fadeInDown"},h={class:"page-title"},w={class:"page-subtitle"},_={class:"news-content section-padding"},k={class:"container"},x={key:0,class:"loading-state"},b={key:1,class:"error-state"},P={key:2,class:"news-grid"},C={key:0,class:"no-posts"},D={class:"card-header"},N={class:"post-date"},S={class:"card-content"},T={class:"post-title"},j={class:"post-excerpt"},I={class:"post-meta"},L={class:"author"},E=["onClick"],H={key:0},M={key:1},A={key:0,class:"expanded-content"},B=["innerHTML"];const F=a({name:"News",setup(){const a=e(),l=n([]),r=n(!1),c=n(null),o=n([]),i=async()=>{r.value=!0,c.value=null;try{const a=await s.getPosts();a.success?l.value=a.posts||[]:c.value=a.error||"Грешка при зареждане на новините"}catch(a){c.value="Грешка при свързване със сървъра"}finally{r.value=!1}};return t(()=>{i()}),{languageStore:a,posts:l,loading:r,error:c,expandedPosts:o,loadPosts:i,togglePost:a=>{const e=o.value.indexOf(a.id);e>-1?o.value.splice(e,1):o.value.push(a.id)},formatDate:a=>{if(!a)return"";return new Date(a).toLocaleDateString("bg-BG",{year:"numeric",month:"long",day:"numeric"})},getCategoryName:a=>({news:"Новини",tournaments:"Турнири",updates:"Обновления",general:"Общи"}[a]||"Новини"),getExcerpt:(a,e=200)=>{if(!a)return"";const s=a.replace(/<[^>]*>/g,"");return s.length>e?s.substring(0,e)+"...":s},formatContent:a=>a?a.replace(/\n/g,"<br>"):""}}},[["render",function(a,e,s,n,t,F){return l(),r("div",v,[c("div",f,[e[3]||(e[3]=c("div",{class:"header-bg-pattern"},null,-1)),e[4]||(e[4]=c("div",{class:"header-particles"},null,-1)),c("div",m,[c("div",y,[e[1]||(e[1]=c("div",{class:"header-icon-wrapper"},[c("div",{class:"icon-glow"}),c("i",{class:"fas fa-newspaper header-main-icon"})],-1)),c("h1",h,o(n.languageStore.t("newsTitle")),1),c("p",w,o(n.languageStore.t("latestNews")),1),e[2]||(e[2]=c("div",{class:"header-decorative-line"},[c("span",{class:"line-segment"}),c("span",{class:"line-diamond"},"◆"),c("span",{class:"line-segment"})],-1))])])]),c("div",_,[c("div",k,[n.loading?(l(),r("div",x,e[5]||(e[5]=[c("i",{class:"fas fa-spinner fa-spin"},null,-1),c("span",null,"Зареждане на новини...",-1)]))):n.error?(l(),r("div",b,[e[6]||(e[6]=c("i",{class:"fas fa-exclamation-triangle"},null,-1)),c("span",null,o(n.error),1),c("button",{onClick:e[0]||(e[0]=(...a)=>n.loadPosts&&n.loadPosts(...a)),class:"btn-secondary"},"Опитай отново")])):(l(),r("div",P,[0===n.posts.length?(l(),r("div",C,e[7]||(e[7]=[c("i",{class:"fas fa-newspaper"},null,-1),c("h3",null,"Няма налични новини",-1),c("p",null,"Моментално няма публикувани новини.",-1)]))):i("",!0),(l(!0),r(d,null,u(n.posts,a=>(l(),r("article",{key:a.id,class:p(["news-card animate__animated animate__fadeInUp",{featured:a.featured}])},[c("div",D,[c("div",{class:p(["category-tag","category-"+a.category])},o(n.getCategoryName(a.category)),3),c("div",N,[e[8]||(e[8]=c("i",{class:"fas fa-calendar-alt"},null,-1)),g(" "+o(n.formatDate(a.created_at)),1)])]),c("div",S,[c("h2",T,o(a.title),1),c("p",j,o(n.getExcerpt(a.content)),1),c("div",I,[c("div",L,[e[9]||(e[9]=c("i",{class:"fas fa-user"},null,-1)),g(" "+o(a.author||"Academy Team"),1)]),c("button",{onClick:e=>n.togglePost(a),class:"read-more-btn"},[n.expandedPosts.includes(a.id)?(l(),r("span",M,e[11]||(e[11]=[g(" Скрий "),c("i",{class:"fas fa-chevron-up"},null,-1)]))):(l(),r("span",H,e[10]||(e[10]=[g(" Прочети повече "),c("i",{class:"fas fa-chevron-down"},null,-1)])))],8,E)])]),n.expandedPosts.includes(a.id)?(l(),r("div",A,[c("div",{class:"full-content",innerHTML:n.formatContent(a.content)},null,8,B)])):i("",!0)],2))),128))]))])])])}],["__scopeId","data-v-0f96192e"]]);export{F as default};
